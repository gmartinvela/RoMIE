<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>RoMIE</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="WebLab Deusto">

    {% load staticfiles %}
    <link rel="icon" href="{% static "ico/favicon.png" %}" type="image/x-icon" />

    <script type="text/javascript" charset="utf-8" src="{% static "js/jquery-1.9.1.js" %}"></script>
    <script type="text/javascript" charset="utf-8" src="{% static "js/jquery-ui.js" %}"></script>
    <script type="text/javascript" charset="utf-8" src="{% static "js/jquery.ui.touch-punch.js" %}"></script>
    <script type="text/javascript" charset="utf-8" src="{% static "js/chardinjs.js" %}"></script>
    <script type="text/javascript" charset="utf-8" src="{% static "js/bootbox.js" %}"></script>
    <script type="text/javascript" charset="utf-8" src="{% static "js/bootstrap.js" %}"></script>



    <link href="{% static "css/bootstrap.css" %}" rel="stylesheet">
    <link href="{% static "css/chardinjs.css" %}" rel="stylesheet">

    <style>
      body {
        padding-top: 53px; /* 50-60px to make the container go all the way to the bottom of the topbar */
      }
    </style>
    <!-- Fav and touch icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="bootstrap/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="bootstrap/ico/apple-touch-icon-114-precomposed.png">
      <link rel="apple-touch-icon-precomposed" sizes="72x72" href="bootstrap/ico/apple-touch-icon-72-precomposed.png">
                    <link rel="apple-touch-icon-precomposed" href="bootstrap/ico/apple-touch-icon-57-precomposed.png">
                                   <link rel="shortcut icon" href="static/ico/favicon.png">
  </head>

  <body>

 
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          
          <div class="nav-collapse collapse" >
           <a class="brand" href="" >RoMIE</a>
           <ul class="nav">
             <li class="active"><a href="/RoMIE"><i class="icon-pencil icon-white"></i>&nbsp;Remote Laboratory&nbsp;</a></li>
             <li class=""><a href="/RoMIE/blockly"><i></i>&nbsp;Blockly&nbsp;</a></li>
             <!--<li><a href="quiz"><i class="icon-eye-open icon-white"></i>&nbsp;Quiz&nbsp;</a></li>-->
	     <!--<li class="active"id="arrow_down"><a href=""><i class="icon-eye-open icon-white"></i>&nbsp;Reconnect&nbsp;</a></li>-->
           </ul>
           <div class="btn-group pull-right">
              <a class="btn btn-primary"  id="quick_help" href="#" data-toggle="chardinjs"><i class="icon-warning-sign icon-white"></i>&nbspQuick Help</a>
             </div>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>


    <div class="container-fluid">
     <div class="row-fluid" >

      <div class="span9">
       <img src="{% static "images/main_640x480_RoMIE.jpg" %}" id="main_image" class="img-polaroid" width=100% height=100% data-intro="This is front image from the robot. You can see if the robot has obstacles in front." data-position="bottom">
      </div>


    <div class="span3" >

     <div class="alert alert-info" data-intro="These are the buttons to control the robot over the maze." data-position="left">

      <div class="container-fluid" >
       <div class="row-fluid">

        <div class="span4 offset4" id="arrow_up">
         <img class="btn" src="{% static "images/arrow_up.png" %}" width=100% height=100% >
        </div>

        <div class="span12">
         <div class="span4" id="arrow_left">
          <img class="btn" src="{% static "images/arrow_left.png" %}" width=100% height=100%>
         </div>

         <div class="span4 offset4" id="arrow_right">
          <img class="btn" src="{% static "images/arrow_right.png" %}"  width=100% height=100%>
         </div>
        </div>  

        <div class="span4 offset4" id="arrow_down" >
         <img class="btn" src="{% static "images/arrow_down.png" %}" width=100% height=100%>
        </div>

        </div>
       </div>
     </div>
     <div>
      <img src="{% static "images/main_640x480_RoMIE.jpg" %}" id="second_image" class="img-polaroid" data-intro="This is the main image of the maze. In this image you may view the robot and its position." data-position="bottom"  width=100% height=100%>
      </div>     
    </div>

   </div>
</div>
</body>	


<script>
$("#arrow_up").click(function() {
   $.post("http://localhost:8000/RoMIE/", { command: "F" } );
   $("#arrow_up img").attr("src","{% static "images/arrow_up_pushed.png" %}");
   $("#arrow_up img").addClass("disabled")
  
   setTimeout(function() {
      $("#arrow_up img").attr("src","{% static "images/arrow_up.png" %}")
      $("#arrow_up img").removeClass("disabled")
   } , 3000);
});
</script>

<script>
$("#arrow_down").click(function() {
   $.post("http://localhost:8000/RoMIE/", { command: "B" } );
   $("#arrow_down img").attr("src","{% static "images/arrow_down_pushed.png" %}");
   $("#arrow_down img").addClass("disabled")

   setTimeout(function() {
      $("#arrow_down img").attr("src","{% static "images/arrow_down.png" %}")
      $("#arrow_down img").removeClass("disabled")
   } , 2000);
});
</script>

<script>
$("#arrow_left").click(function() {
   $.post("http://localhost:8000/RoMIE/", { command: "L" } );
   $("#arrow_left img").attr("src","{% static "images/arrow_left_pushed.png" %}");
   $("#arrow_left img").addClass("disabled")

   setTimeout(function() {
      $("#arrow_left img").attr("src","{% static "images/arrow_left.png" %}")
      $("#arrow_left img").removeClass("disabled")
   } , 1200);
});
</script>

<script>
$("#arrow_right").click(function() {
   $.post("http://localhost:8000/RoMIE/", { command: "R" } );
   $("#arrow_right img").attr("src","{% static "images/arrow_right_pushed.png" %}");
   $("#arrow_right img").addClass("disabled")

   setTimeout(function() {
      $("#arrow_right img").attr("src","{% static "images/arrow_right.png" %}")
      $("#arrow_right img").removeClass("disabled")
   } , 1200);
});
</script>

<script type="text/javascript">

   var myImageElement = document.getElementById('main_image');
   setInterval(function() {
    var myImageElement = document.getElementById('main_image');
    myImageElement.src = 'http://192.168.0.170/image.jpg?rand=' + Math.random();
   }, 600);

</script>

<script type="text/javascript">

   setInterval(function() {
    var myImageElement = document.getElementById('second_image');
    myImageElement.src = 'http://192.168.0.160/image.jpg?rand=' + Math.random();
   }, 600);

</script>

<script type="text/javascript">

  function requestJoystickStatus() {
    $.get("http://127.0.0.1:8000/RoMIE/joystick-status/", function(data) {
      var pending = JSON.parse(data);

      $.each(pending, function(pos, joystick) {
        if (joystick == 1) {
          $("#arrow_up").click()
        } else if (joystick == 2) {
          $("#arrow_left").click()
        } else if (joystick == 3) {
          $("#arrow_right").click()
        } else if (joystick == 4) {
	  $("#arrow_down").click()
	}

      });
      requestJoystickStatus();
    });
  }
  
  requestJoystickStatus();


</script>

<script type="text/javascript">
//$(document).keydown(function(e){
  //  if (e.keyCode == 38) { 
    //   $("#arrow_up").click()
    //} else if (e.keyCode == 37) { 
      // $("#arrow_left").click()
   // } else if (e.keyCode == 39) { 
    //   $("#arrow_right").click()
    //} else if (e.keyCode == 40) { 
    //   $("#arrow_down").click()
   // }
//});
</script>
